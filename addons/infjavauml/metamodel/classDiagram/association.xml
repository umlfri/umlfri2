<?xml version="1.0" encoding="utf-8"?>
<ConnectionType id="association" xmlns="http://umlfri.org/v2/addon.xsd">
    <Icon path="icons/association.png"/>
    
    <Structure>
        <Attribute id="name" type="str" />
        <Attribute id="direction" type="enum" default="toDestination">
            <Value value="unspecified"/>
            <Value value="toDestination"/>
            <Value value="toSource"/>
            <Value value="bidirectional"/>
        </Attribute>
        <Attribute id="stereotype" type="str" />
        <Attribute id="source" type="object">
            <Attribute id="cardinality" type="str">
                <Value value=""/>
                <Value value="*"/>
                <Value value="0"/>
                <Value value="0"/>
                <Value value="0..1"/>
                <Value value="1"/>
                <Value value="1.."/>
                <Value value="1..*"/>
            </Attribute>
            <Attribute id="visibility" type="enum">
                <Value value="unspecified"/>
                <Value value="-"/>
                <Value value="*"/>
                <Value value="+"/>
            </Attribute>
            <Attribute id="role" type="str"/>
        </Attribute>
        <Attribute id="destination" type="object">
            <Attribute id="cardinality" type="str">
                <Value value=""/>
                <Value value="*"/>
                <Value value="0"/>
                <Value value="0"/>
                <Value value="0..1"/>
                <Value value="1"/>
                <Value value="1.."/>
                <Value value="1..*"/>
            </Attribute>
            <Attribute id="visibility" type="enum">
                <Value value="unspecified"/>
                <Value value="-"/>
                <Value value="*"/>
                <Value value="+"/>
            </Attribute>
            <Attribute id="role" type="str"/>
        </Attribute>
        <Attribute id="note" type="text" />
    </Structure>
    
    <Appearance>
        <Line style="solid" color="#cfg.Styles.Connection.LineColor"/>
        
        <Switch value="#self.direction">
            <Case condition="toDestination">
                <Arrow index="-1" style="simple_arrow" color="#cfg.Styles.Connection.ArrowColor"/>
            </Case>
            <Case condition="toSource">
                <Arrow index="0" style="simple_arrow" color="#cfg.Styles.Connection.ArrowColor"/>
            </Case>
            <Case condition="bidirectional">
                <Arrow index="-1" style="simple_arrow" color="#cfg.Styles.Connection.ArrowColor"/>
                <Arrow index="0" style="simple_arrow" color="#cfg.Styles.Connection.ArrowColor"/>
            </Case>
        </Switch>
        
        <Label position="center">
            <VBox>
                <If condition="#self.stereotype">
                    <Align align="center">
                        <Rectangle fill="#cfg.Styles.Connection.TextFill">
                            <TextBox font="#cfg.Styles.Connection.TextFont" color="#cfg.Styles.Connection.TextColor">
                                <Text text="&#171;"/>
                                <Text text="#self.stereotype"/>
                                <Text text="&#187;"/>
                            </TextBox>
                        </Rectangle>
                    </Align>
                </If>
                
                <If condition="#self.name">
                    <Align align="center">
                        <Rectangle fill="#cfg.Styles.Connection.TextFill">
                            <TextBox text="#self.name" font="#cfg.Styles.Connection.NameTextFont" color="#cfg.Styles.Connection.NameTextColor"/>
                        </Rectangle>
                    </Align>
                </If>
            </VBox>
        </Label>
        
        <Label position="source">
            <If condition="#self.source.cardinality">
                <Rectangle fill="#cfg.Styles.Connection.TextFill">
                    <TextBox text="#self.source.cardinality" font="#cfg.Styles.Connection.NameTextFont" color="#cfg.Styles.Connection.NameTextColor"/>
                </Rectangle>
            </If>
        </Label>
        
        <Label position="destination">
            <If condition="#self.destination.cardinality">
                <Rectangle fill="#cfg.Styles.Connection.TextFill">
                    <TextBox text="#self.destination.cardinality" font="#cfg.Styles.Connection.NameTextFont" color="#cfg.Styles.Connection.NameTextColor"/>
                </Rectangle>
            </If>
        </Label>
        
        <Label position="source+1">
            <If condition="#self.source.role">
                <Rectangle fill="#cfg.Styles.Connection.TextFill">
                    <TextBox font="#cfg.Styles.Connection.NameTextFont" color="#cfg.Styles.Connection.NameTextColor">
                        <If condition="#self.source.visibility != 'unspecified'">
                            <Text text="#self.source.visibility" />
                        </If>
                        <Text text="#self.source.role"/>
                    </TextBox>
                </Rectangle>
            </If>
        </Label>


        <Label position="destination+1">
            <If condition="#self.destination.role">
                <Rectangle fill="#cfg.Styles.Connection.TextFill">
                    <TextBox font="#cfg.Styles.Connection.NameTextFont" color="#cfg.Styles.Connection.NameTextColor">
                        <If condition="#self.destination.visibility != 'unspecified'">
                            <Text text="#self.destination.visibility" />
                        </If>
                        <Text text="#self.destination.role"/>
                    </TextBox>
                </Rectangle>
            </If>
        </Label>
    </Appearance>
</ConnectionType>
